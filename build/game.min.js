!function(){window.Helpers={getObjValues:function(obj){var key,items=obj||{},arr=[];for(key in items)items.hasOwnProperty(key)&&arr.push(items[key]);return arr},getObjKeys:function(obj){var key,items=obj||{},arr=[];for(key in items)items.hasOwnProperty(key)&&arr.push(key);return arr}}}(),function(){function load(urlOrArr){urlOrArr instanceof Array?urlOrArr.forEach(function(url){_load(url)}):_load(urlOrArr)}function _load(url){if(resourceCache[url])return resourceCache[url];var img=new Image;img.onload=function(){resourceCache[url]=img,isReady()&&readyCallbacks.forEach(function(func){func()})},resourceCache[url]=!1,img.src=url}function get(url){return resourceCache[url]}function isReady(){var ready=!0;for(var k in resourceCache)resourceCache.hasOwnProperty(k)&&!resourceCache[k]&&(ready=!1);return ready}function onReady(func){readyCallbacks.push(func)}var resourceCache={},readyCallbacks=[];window.Resources={load:load,get:get,onReady:onReady,isReady:isReady}}(),function(){var blockHeight=83,Block=function(ctx,type,x,y){this.context=ctx,this.type=type,this.sprite=Block.types[this.type],this.x=x,this.y=y};Block.types={grass:"images/grass-block.png",stone:"images/stone-block.png",water:"images/water-block.png"},Block.getSprites=function(){return Helpers.getObjValues(Block.types)},Block.prototype.render=function(){var img=Resources.get(this.sprite);this.context.drawImage(img,this.x*img.width,this.y*blockHeight)};var Player=function(ctx,character,x,y){this.context=ctx,this.character=character,this.sprite=Player.characters[this.character],this.x=x,this.y=y};Player.getSprites=function(){return Helpers.getObjValues(Player.characters)},Player.characters={boy:"images/char-boy.png","cat-girl":"images/char-cat-girl.png","pink-girl":"images/char-pink-girl.png"},Player.prototype.render=function(){var img=Resources.get(this.sprite);this.context.drawImage(img,this.x*img.width,this.y*blockHeight-10)},window.Player=Player,window.Block=Block}(),function(global){function main(){var now=Date.now(),dt=(now-lastTime)/1e3;update(dt),render(),lastTime=now}function init(){reset(),initEntities(),lastTime=Date.now(),main()}function update(dt){updateEntities(dt)}function updateEntities(dt){}function within(value,min,max){return null!=value&&value>=min&&max>=value}function withinGrid(pos){return pos&&within(pos.x,0,columns)&&within(pos.y,0,rows.length)}function render(){blocks.forEach(function(block){block.render()}),withinGrid(player)&&player.render()}function reset(){}function loadResources(){var images=[];images=images.concat(Player.getSprites()),images=images.concat(Block.getSprites()),Resources.load(images),Resources.onReady(init)}function initEntities(){allEnemies=[],blocks=[];var characters=Helpers.getObjKeys(Player.characters),charInd=Math.floor(Math.random()*characters.length),xPos=Math.floor(Math.random()*columns);player=new Player(ctx,characters[charInd],xPos,rows.length-1),initBlocks()}function initBlocks(){var row,col,nRows=rows.length;for(row=0;nRows>row;row++)for(col=0;columns>col;col++)blocks.push(new Block(ctx,rows[row],col,row))}var lastTime,doc=global.document,canvas=(global.window,doc.createElement("canvas")),ctx=canvas.getContext("2d"),columns=5,rows=["water","stone","stone","stone","grass","grass"],player=null,allEnemies=[],blocks=[];canvas.width=505,canvas.height=606,doc.body.appendChild(canvas),global.ctx=ctx,window.Engine={init:loadResources}}(this),document.addEventListener("keyup",function(e){}),Engine.init();